<template>

    <template lwc:if={isDesktopCheckoutPage}>
        <div class="home">

            <!-- When page is loading -->
            <template lwc:if={isPageLoaded}>
                <c-on-loading-screen></c-on-loading-screen>
            </template>

            <!-- When page loaded -->
            <template lwc:else>
                <div class="dropdowns">

                    <!-- Visit -->
                    <template lwc:if={isAcc}>

                        <!-- Summery -->
                        <div class="dropdown">
                            <div class="dropdown-head">
                                <div class="dropdown-head-left" onclick={toggleSummeryDropdown}>
                                    <i class="material-icons dropdown-head-nav-icon">
                                        <lightning-icon icon-name="utility:chevronup" size="x-small" alternative-text=""
                                            class="chevron-icon-sum chevron-icon"></lightning-icon>
                                    </i>
                                    <h4 class="dropdown-head-title visitHeading">
                                        <img src={summeryIcons.summery} width="15" height="15"> &nbsp;&nbsp;
                                        Business Summary
                                    </h4>
                                </div>
                            </div>
                            <div class="dropdown-body-sum dropdown-body active">
                                <div class="dropdown-head-sum">
                                    <div class="dashboard-container">
                                        <div class="tile" data-name="outstanding"><!--onclick={openBusinesSummary}-->
                                            <p class="title">Outstanding</p>
                                            <p class="amount">₹ 0</p><!--{businessSummery.totalOutStanding}-->
                                        </div>
                                        <div class="tile" data-name="order">
                                            <p class="title">Orders</p>
                                            <p class="amount">₹0</p> <!--{businessSummery.totalOrderAmt}-->
                                        </div>
                                        <div class="tile" data-name="sales">
                                            <p class="title">Sales</p>
                                            <p class="amount">₹ 15,00,000</p><!--{businessSummery.totalSalesAmt}-->
                                        </div>
                                        <div class="tile" data-name="visit">
                                            <p class="title">Visits</p>
                                            <p class="amount">{businessSummery.AllVisit}</p>
                                            <!--{businessSummery.AllVisit}-->
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>


                        <!--    Order -->
                        <div class="dropdown">
                            <div class="dropdown-head">
                                <div class="dropdown-head-left" onclick={toggleOrderDropdown}>
                                    <i class="material-icons dropdown-head-nav-icon">
                                        <lightning-icon icon-name="utility:chevronup" size="x-small" alternative-text=""
                                            class="chevron-icon-ord chevron-icon"></lightning-icon>
                                    </i>
                                    <h4 class="dropdown-head-title visitHeading">
                                        <img src={summeryIcons.order} width="15" height="15"> &nbsp;&nbsp;
                                        Orders
                                    </h4>
                                </div>
                                <div class="dropdown-head-right">
                                    <template lwc:if={isInProgress}>
                                        <div class="" onclick={openProductScreen}>
                                            <lightning-icon icon-name="utility:forward" size="xx-small"
                                                alternative-text="" class="">
                                            </lightning-icon>
                                        </div>

                                    </template>
                                    <template lwc:if={orderData}>
                                        <lightning-icon icon-name="utility:check" size="small" alternative-text=""
                                            class="checkColor">
                                        </lightning-icon>
                                    </template>
                                    <template lwc:else>
                                        <lightning-icon icon-name="utility:clock" size="small" alternative-text=""
                                            class="cloclColor">
                                        </lightning-icon>
                                    </template>


                                </div>
                            </div>
                            <div class="dropdown-body-ord dropdown-body ">

                                    <div class="no-data">
                                       No orders created yet.
                                    </div>
                            </div>
                        </div>






                        <!--    collections -->
                        <div class="dropdown">
                            <div class="dropdown-head">
                                <div class="dropdown-head-left" onclick={toggleCollectionDropdown}>
                                    <i class="material-icons dropdown-head-nav-icon">
                                        <lightning-icon icon-name="utility:chevrondown" size="x-small"
                                            alternative-text="" class="chevron-icon-col"></lightning-icon>
                                    </i>
                                    <h4 class="dropdown-head-title visitHeading">
                                        <img src={summeryIcons.payment} width="15" height="15"> &nbsp;&nbsp;
                                        Collections
                                    </h4>
                                </div>

                                <div class="dropdown-head-right">
                                    <template lwc:if={isInProgress}>
                                        <div class="" onclick={openCollectionScreen}>
                                            <lightning-icon icon-name="utility:forward" size="xx-small"
                                                alternative-text="" class="">
                                            </lightning-icon>
                                        </div>
                                    </template>

                                    <template lwc:if={visActionData.Collection}>
                                        <lightning-icon icon-name="utility:check" size="small" alternative-text=""
                                            class="checkColor">
                                        </lightning-icon>
                                    </template>
                                    <template lwc:else>
                                        <lightning-icon icon-name="utility:clock" size="small" alternative-text=""
                                            class="cloclColor">
                                        </lightning-icon>
                                    </template>
                                </div>
                            </div>

                            <div class="dropdown-body-col dropdown-body ">
                                <div >
                                    <template lwc:if={visActionData.Collection}>
                                        <table class="dropdown-table">
                                            <tr>
                                                <template for:each={tableHeading.collection} for:item="item"
                                                    for:index="index">
                                                    <th class="slds-border_top" key={item}><b>{item}</b></th>
                                                </template>
                                            </tr>

                                            <template for:each={visActionData.Collection} for:item="tar"
                                                for:index="index">
                                                <tr class="slds-border_top slds-border_bottom" key={tar.Id}>
                                                    <td>{tar.Invoice_Number__c}</td>
                                                    <td>{tar.Due_Amount__c}</td>
                                                    <td>{tar.Collected_Amount__c}</td>
                                                    <td>{tar.Collection_Date__c}</td>
                                                </tr>
                                            </template>
                                        </table>
                                    </template>

                                    <template lwc:else>
                                    <div class="no-data">
                                            No Collections created yet.
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>



                        <div class="dropdown">
                            <div class="dropdown-head">
                                <div class="dropdown-head-left" onclick={toggleQuoteDropdown}>
                                    <i class="material-icons dropdown-head-nav-icon">
                                        <lightning-icon icon-name="utility:chevrondown" size="x-small"
                                            alternative-text="" class="chevron-icon-quo"></lightning-icon>
                                    </i>
                                    <h4 class="dropdown-head-title visitHeading">
                                        <img src={summeryIcons.product} width="15" height="15"> &nbsp;&nbsp;
                                        Quotes
                                    </h4>
                                </div>

                                <div class="dropdown-head-right">
                                    <template lwc:if={isInProgress}>
                                        <div class="" onclick={openQuoteScreen}>
                                            <lightning-icon icon-name="utility:forward" size="xx-small"
                                                alternative-text="" class="">
                                            </lightning-icon>
                                        </div>
                                    </template>

                                    <template lwc:if={visActionData.Quote}>
                                        <lightning-icon icon-name="utility:check" size="small" alternative-text=""
                                            class="checkColor">
                                        </lightning-icon>
                                    </template>
                                    <template lwc:else>
                                        <lightning-icon icon-name="utility:clock" size="small" alternative-text=""
                                            class="cloclColor">
                                        </lightning-icon>
                                    </template>
                                </div>
                            </div>

                            <div class="dropdown-body-quo dropdown-body ">
                                <div >

                                    <template lwc:if={visActionData.Quote}>
                                        <table class="dropdown-table">
                                            <tr>
                                                <template for:each={tableHeading.quote} for:item="item"
                                                    for:index="index">
                                                    <th class="slds-border_top" key={item}><b>{item}</b></th>
                                                </template>
                                            </tr>

                                            <template for:each={visActionData.Quote} for:item="tar" for:index="index">
                                                <tr class="slds-border_top slds-border_bottom" key={tar.Id}>
                                                    <td>{tar.Product_Category__r.Name}</td>
                                                    <td>{tar.Product__r.Name}</td>
                                                    <td>{tar.Quantity__c}</td>
                                                    <td>{tar.Total_Amount__c}</td>
                                                </tr>
                                            </template>
                                        </table>
                                    </template>

                                    <template lwc:else>
                                         <div class="no-data">
                                         No Quotes created yet.
                                        </div>
                                    </template>

                                </div>
                            </div>
                        </div>




                    </template>

                    <!-- Capture image -->
                    <div class="dropdown">
                        <div class="dropdown-head">
                            <div class="dropdown-head-left" onclick={toggleImageDropdown}>
                                <i class="material-icons dropdown-head-nav-icon">
                                    <lightning-icon icon-name="utility:chevrondown" size="x-small" alternative-text=""
                                        class="chevron-icon-image"></lightning-icon>
                                </i>
                                <h4 class="dropdown-head-title visitHeading">
                                    <img src={summeryIcons.camera} width="15" height="15"> &nbsp;&nbsp;
                                    Capture Image
                                </h4>
                            </div>

                            <div class="dropdown-head-right">
                                <template lwc:if={isInProgress}>
                                    <div class="" onclick={openCamerScreen}>

                                        <lightning-icon icon-name="utility:forward" size="xx-small" alternative-text=""
                                            class="">
                                        </lightning-icon>
                                    </div>
                                    <!-- <div class="circle" onclick={openCamerScreen}>
            
                                        <lightning-icon 
                                            icon-name="utility:play" 
                                            size="xx-small" 
                                            alternative-text=""
                                            class="invert-image playColor">
                                        </lightning-icon>
                                    </div>  -->

                                </template>
                                <template lwc:if={visActionData.VisitPhoto}>
                                    <lightning-icon icon-name="utility:check" size="small" alternative-text=""
                                        class="checkColor">
                                    </lightning-icon>
                                </template>
                                <template lwc:else>
                                    <lightning-icon icon-name="utility:clock" size="small" alternative-text=""
                                        class="cloclColor">
                                    </lightning-icon>
                                </template>

                                <!-- <lightning-icon icon-name="utility:expand" size="x-small" alternative-text="Expand" ></lightning-icon> -->
                            </div>
                        </div>
                        <div class=" dropdown-body-image ">
                            <div class="dropdown-head">
                                <template lwc:if={visActionData.photoData}>
                                    <table class="dropdown-table">

                                        <template for:each={visActionData.photoData} for:item="item" for:index="index">
                                            <tr class="slds-border_top slds-border_bottom" key={item.Id}>
                                                <td>
                                                    <div data-id={item.Id} onclick={previewFile}>
                                                        <a href="javascript:void(0)">
                                                            {item.Title}
                                                        </a>
                                                    </div>

                                                </td>
                                                <td>
                                                    <template lwc:if={isInProgress}>
                                                        <div class="slds-clearfix" data-id={item.Id}
                                                            onclick={deleteSelectedFile} data-name={item.Title}>
                                                            <div class="slds-float_right">
                                                                <a href="javascript:void(0)">
                                                                    <lightning-icon size="x-small"
                                                                        icon-name="utility:delete"
                                                                        alternative-text="Delete"></lightning-icon>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </td>
                                            </tr>
                                        </template>

                                    </table>
                                </template>
                                <template lwc:else>
                               <div class="no-data">
                                        No Photos captured yet.
                                    </div>
                                </template>

                            </div>
                        </div>
                    </div>

                </div>
            </template>
        </div>
    </template>
    <template lwc:if={completeVisit}>
        <c-visit-form-popup record-id={recordId} is-desktop={isDesktop} onmyvisitclick={createNewVisit}
            complete-visit={completeVisit} onenablechild={handleEnable}></c-visit-form-popup>
    </template>
</template>